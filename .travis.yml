language: java
install: "curl -sL https://raw.githubusercontent.com/travis-ci/artifacts/master/install | bash"
matrix:
  include:
  - os: linux
    sudo: false
    jdk: oraclejdk8
  - os: osx
    osx_image: xcode9.1
    env: JAVA_HOME=$(/usr/libexec/java_home)
script: "./build.sh -Dexist.autodeploy=off -Dtest.haltonerror=true -Dtest.haltonfailure=true
  travis"
notifications:
  hipchat: ec8fcfa661addc56a361a8ef536320@integrations
after_failure: "artifacts upload --key AKIAIZDFTNH5RI6OYVMA --bucket exist-travis-ci --s3-region us-east-1 test/junit/data"
after_success: "artifacts upload --key AKIAIZDFTNH5RI6OYVMA --bucket exist-travis-ci --s3-region us-east-1 test/junit/data"
env:
  global:
    secure: OK2zK2CYg8EmKHTgvkbtZfytYcWnfPo1KytFJvNL4ZSIi4RYz6XJTwJjCMG8lL6aEioBIpo87bRcXXfIeBDpg98kFZTeneavysV/ks+rZY/WegqrlgpfRYEurlPnN6515l3389vw8cFv/A7VWok3/o1O1kn2skLP7FGyOMov5tI=
