<project xmlns:xdb="http://exist-db.org/ant" 
   default="load-mods" 
   name="MODS Database Loader">

    <description>This ant file loads all of the finds for the 
    MODS XForms editor demo.  NOTE: To make sure
    that only the correct files are in the database
    the ${mods-collection} path is first removed.</description>
    
    <property file="local.properties"/>

    <path id="classpath.core">
        <pathelement path="${exist.home}/exist.jar"/>
        <pathelement path="${exist.home}/exist-optional.jar"/>
        <fileset dir="${exist.home}/lib/core/">
            <include name="*.jar"/>
        </fileset>
        
    </path>
    
    <typedef resource="org/exist/ant/antlib.xml"  uri="http://exist-db.org/ant">
        <classpath refid="classpath.core"/>
    </typedef>

    <target name="echo-params">
       <echo message="exist.home=${exist.home}"/>
       <echo message="server-uri=${server-uri}"/>
       <echo message="mods-collection=${mods-collection}"/>
    </target>

    <target name="load-mods">
        <echo message="Removing old MODS application from eXist database"/>

        <xdb:remove user="${admin.username}" password="${admin.password}"
            uri="${server-uri}" collection="${mods-collection}"/>
        
        <echo message="Loading new MODS database into eXist database at ${server-uri}${mods-collection}"/>
        <xdb:store user="${admin.username}" password="${admin.password}"
            uri="${server-uri}${mods-collection}"
            createcollection="true" createsubcollections="true" failonerror="false">
            <fileset dir="mods"/>
        </xdb:store>
    </target>
    
</project>