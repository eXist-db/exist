<div xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xf="http://www.w3.org/2002/xforms" class="language" tab-id="language">
    <div class="block-form">
        <!--DLF/Aquifer: Recommended if applicable-->
        <!--Cluster: include-->
        <!-- DLF/Aquifer: Required, if language is primary to resource. Required: at least one pair of languageTerm elements representing the primary language of the text wrapped in a single language element. One of these languageTerm elements should carry the attribute type="text" and the other should have type="code". -->
        <!--Cluster: Allow coded input in iso639-2b code only. iso639-2b is the code used for @lang = language-3-type-code. Have textual equivalent input automatically. -->
        <!--NB: This element can be repeated because of @objectPart. DLF/Aquifer holds @objectPart to be an attribute on languageTerm, Guidelines hold @objectPart to be an attribute on on language. -->
        <fieldset>
            <div class="join">
                <legend>Resource Languages</legend>
                <span class="xforms-hint">
                    <span onmouseover="show(this, 'hint', true)" onmouseout="show(this, 'hint', false)" class="xforms-hint-icon"/>
                    <div class="xforms-hint-value">
                        <p> Here the language of the contents of the described resource as a whole is noted. </p>
                        <p> Language may also be expressed in relation to a single field, by means of the Language field, in order to note the language used in a particular field. This is only necessary if the language used in the field in quesiotn (e.g. in an alternative title) is different from the language noted in Resource Language. </p>
                        <p> Cataloging Language under Record Info is used to note the language used in the record itself. Cataloging Language is not the Resource Language, but of the metadata describing a resource, i.e. the record you are working on or looking at now. The Language of Cataloging is assumed to be English; if you wish to note another Language of Cataloging, click "Show All" to display the required tab.. </p>
                        <p> At least one Resource Language field is required for all resources in which language is primary to understanding the resource. These resources include textual resources, but also audio and video resources with spoken word components. </p>
                        <p> Although Language is usually not required for non-textual resources such as images, it could be used effectively for such resources when language is a component. Examples of the latter might include a photograph of a sign with text or a monument with an inscription. </p>
                        <p> The Language field is optional for resources in which language is important to understanding the resource, but not primary. For example, the caption of a photograph may in some instances be important to understanding the photograph, but not primary. If the content of the resource is in more than one language, Language is repeated for each language employed. </p>
                    </div>
                </span>
            </div>
            <!--language repeat begins-->
            <xf:repeat nodeset="instance('save-data')/mods:language" id="language-repeat">
                <div class="block-form">
                    <!--language input begins-->
                    <!--DLF/Aquifer: OPTIONAL-->
                    <!--Cluster: include-->
                    <xf:group ref=".[@objectPart]" appearance="full">
                        <xf:input ref="./@objectPart" class="text_50">
                            <xf:label>Object Part: </xf:label>
                            <xf:hint>
                                <p> This field designates which part of the resource is in the language stated in Language Term. The values of the field are not controlled by an authority list; examples of values of Object Part are "Summary" and "Caption". If you use this field, use expressions of similar generality. </p>
                            </xf:hint>
                        </xf:input>
                    </xf:group>
                    <!--language input ends-->
                    <!--languageTerm begins-->
                    <xf:group id="fieldset-languageTerm" ref=".[mods:languageTerm]">
                        <fieldset>
                            <div class="join">
                                <span class="xforms-hint">
                                    <span onmouseover="show(this, 'hint', true)" onmouseout="show(this, 'hint', false)" class="xforms-hint-icon"/>
                                    <div class="xforms-hint-value">
                                        <p> Language Term specifies the language(s) of the content of the resource. <!--NB: revise after question of two types of input is solved.--> It may be expressed in textual or coded form. If in coded form, the source of the code should be indicated in the value of the authority field. If no authority is given, it is assumed that the content is textual, i.e. that the Type is "text". If there is more than one representation of the same language, e.g. using different forms of the same language (code or text) or from different authorities, Language Term is repeated within the Language container. </p>
                                    </div>
                                </span>
                            </div>
                            <!--languageTerm repeat begins-->
                            <xf:repeat nodeset="instance('save-data')/mods:language/mods:languageTerm" id="language-term-repeat">
                                <!--languageTerm input begins-->
                                <!--DLF/Aquifer: OPTIONAL-->
                                <!--Cluster: include, with default "code"-->
                                <!--NB: Both text and code version should be saved.-->
                                <xf:group ref=".[@type]" appearance="full">
                                    <xf:select1 ref="./@type">
                                        <xf:label>Type:</xf:label>
                                        <xf:hint>
                                            <p> This field is used to express whether the Language Term value is in textual or coded form. </p>
                                        </xf:hint>
                                        <xf:itemset nodeset="instance('code-tables')/code-table[code-table-name='code-text-code']/items/item">
                                            <xf:label ref="label"/>
                                            <xf:value ref="value"/>
                                        </xf:itemset>
                                    </xf:select1>
                                </xf:group>
                                <!--DLF/Aquifer: REQUIRED-->
                                <!--Cluster: include, with default "iso639-2b"-->
                                <xf:group ref=".[@type='code']" appearance="full">
                                    <xf:select1 ref="./@authority">
                                        <xf:label>Authority:</xf:label>
                                        <xf:hint>
                                            <p> The name of the authoritative list for a controlled value is recorded here. </p>
                                        </xf:hint>
                                        <xf:itemset nodeset="instance('code-tables')/code-table[code-table-name='language-authority-code']/items/item">
                                            <xf:label ref="label"/>
                                            <xf:value ref="value"/>
                                        </xf:itemset>
                                    </xf:select1>
                                </xf:group>
                                <!--DLF/Aquifer: REQUIRED IF APPLICABLE-->
                                <!--Cluster: include-->
                                <xf:group ref=".[@type='code']" appearance="full">
                                    <xf:select1 ref=".">
                                        <xf:label>Language Term (code):</xf:label>
                                        <xf:hint>
                                            <p> Language Term specifies the language(s) of the content of the resource. </p>
                                        </xf:hint>
                                        <xf:itemset nodeset="instance('code-tables')/code-table[code-table-name='language-3-type-code']/items/item">
                                            <xf:label ref="label"/>
                                            <xf:value ref="value"/>
                                        </xf:itemset>
                                    </xf:select1>
                                </xf:group>
                                <!--NB: code tables for rfc3066, iso639-3 and rfc4646 could be made as well.-->
                                <xf:group ref=".[@type='text']" appearance="full">
                                    <xf:select1 ref=".">
                                        <xf:label>Language Term (text):</xf:label>
                                        <xf:hint>
                                            <p> Language Term specifies the language(s) of the content of the resource. </p>
                                        </xf:hint>
                                        <xf:itemset nodeset="instance('code-tables')/code-table[code-table-name='language-3-type-code']/items/item[value=instance('save-data')/mods:language/mods:languageTerm[@type='code']]">
                                            <xf:label ref="label"/>
                                            <xf:value ref="label"/>
                                        </xf:itemset>
                                    </xf:select1>
                                </xf:group>
                                <!--languageTerm input ends-->
                                <!--languageTerm delete begins-->
                                <xf:trigger ref=".[count(../mods:languageTerm) &gt; 1]" class="delete-button">
                                    <xf:label>Delete This Language Term</xf:label>
                                    <xf:delete ev:event="DOMActivate" nodeset="instance('save-data')/mods:language/mods:languageTerm" at="index('language-term-repeat')"/>
                                </xf:trigger>
                                <!--languageTerm delete ends-->
                                <div class="hr"/>
                            </xf:repeat>
                            <!--languageTerm repeat ends-->
                            <!--languageTerm add begins-->
                            <xf:trigger ref=".[count(mods:languageTerm) &gt; 0]" class="add-button">
                                <xf:label>Add Another Language Term</xf:label>
                                <xf:action ev:event="DOMActivate">
                                    <xf:insert nodeset="mods:languageTerm" at="index('language-term-repeat')" position="after" origin="instance('insert-templates')/mods:language/mods:languageTerm"/>
                                    <xf:setvalue ref="instance('save-data')/mods:languageTerm[last()]" value="''"/>
                                </xf:action>
                            </xf:trigger>
                            <!--languageTerm add ends-->
                        </fieldset>
                    </xf:group>
                    <!--languageTerm ends-->
                    <!--language delete begins-->
                    <xf:trigger ref=".[count(../mods:language) &gt; 1]" class="delete-button">
                        <xf:label>Delete This Resource Language</xf:label>
                        <xf:delete ev:event="DOMActivate" nodeset="instance('save-data')/mods:language" at="index('language-repeat')"/>
                    </xf:trigger>
                    <!--language delete ends-->
                    <div class="hr"/>
                </div>
            </xf:repeat>
            <!--language repeat ends-->
            <!--language add begins-->
            <xf:trigger ref=".[count(mods:language) &gt; 0]" class="add-button">
                <xf:label>Add Another Resource Language</xf:label>
                <xf:action ev:event="DOMActivate">
                    <xf:insert nodeset="mods:language" at="index('language-repeat')" position="after" origin="instance('insert-templates')/mods:language"/>
                    <xf:setvalue ref="instance('save-data')/mods:language[last()]" value="''"/>
                </xf:action>
            </xf:trigger>
            <!--language add ends-->
        </fieldset>
    </div>
</div>