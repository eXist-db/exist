<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="http://www.oasis-open.org/docbook/xml/5.0/rng/docbook.rng" type="xml"?>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink"
    version="5.0">
    <info>
        <title>Readying CentOS for eXist Development/Deployment</title>
        <author>
            <personname>Loren Cahlander</personname>
            <email>loren.cahlander@gmail.com</email>
            <affiliation>
                <orgname>
                    <link xlink:href="http://syntactica.com">Syntactica</link>
                </orgname>
            </affiliation></author>
        <author>
            <personname>Dan McCreary</personname>
            <email>dan@danmccreary.com</email>
            <affiliation>
                <orgname>
                    <link xlink:href="http://syntactica.com">Syntactica</link>
                </orgname>
            </affiliation></author>
    </info>
    <sect1>
        <title>How to Setup a CentOS System for Development or Deployment of eXist</title>
        <subtitle>Overview of steps</subtitle>
        <para>This document describes the steps to setup a server using a CentOS verion of UNIX for
            the development or deployment of eXist. This example uses a Tomcat based installation
            although eXist can also be run on the builtin Jetty server.</para>
        <para>Before you begin, you should decide if you really need a 64bit bit system. 64bit
            systems are ideal of you have very large data sets with gigabyte queries. </para>
        <para>Note that you should be aware that by default, eXist allows search engine robots
            access the eXist instance. You will be charged each time a robots file access the files
            unless you change the robots file access.</para>
        <procedure>
            <step>
                <para>Download the Java jvm</para>
            </step>
            <step>
                <para>Download Tomcat Web Server</para>
            </step>
            <step>
                <para>Start Tomcat</para>
            </step>
            <step>
                <para>Download eXist binary</para>
            </step>
        </procedure>
        <programlisting>
</programlisting>
        <para> We first will use the UNIX <emphasis role="bold">yum</emphasis> shell command to get
            all the most recient changes to the yum database. We will use the yum "list" option and
            see all the libraries in the update libary that have the string "java" in them by piping
            the output through the grep command.</para>
        <programlisting>        
-bash-3.2#<emphasis role="bold"> yum update</emphasis>
-bash-3.2#<emphasis role="bold"> yum list | grep java</emphasis>
java-1.6.0-openjdk.x86_64  1:1.6.0.0-0.30.b09.el5      updates  
java-1.6.0-openjdk-demo.x86_64 1:1.6.0.0-0.30.b09.el5      updates  
java-1.6.0-openjdk-devel.x86_641:1.6.0.0-0.30.b09.el5      updates  
java-1.6.0-openjdk-javadoc.x86_64          1:1.6.0.0-0.30.b09.el5      updates  
java-1.6.0-openjdk-src.x86_64  1:1.6.0.0-0.30.b09.el5      updates  
</programlisting>
        <para> We first will use the yum command to get a list of the Java updates. </para>
        <programlisting>    
-bash-3.2#<emphasis role="bold"> yum install java-1.6.0-openjdk.x86_64</emphasis>

</programlisting>
        <para> We can use the UNIX "web get" or <emphasis role="bold">wget</emphasis> command to get
            the appropriate rpm file from the Centos web site and place it into the /tmp directory.
            We found the correct file to use from doing a search on the Centos web site.</para>
        <programlisting>
-bash-3.2#<emphasis role="bold"> cd /tmp</emphasis>    
-bash-3.2#<emphasis role="bold"> wget http://dev.centos.org/centos/5/testing/i386/RPMS/jpackage-utils-1.7.5-1jpp.1.el5.centos.noarch.rpm</emphasis>
--17:42:35--  http://dev.centos.org/centos/5/testing/i386/RPMS/jpackage-utils-1.7.5-1jpp.1.el5.centos.noarch.rpm
</programlisting>
        <para> We can use the UNIX <emphasis role="bold">rpm</emphasis> command to unpackage this
            file. </para>
        <programlisting>

-bash-3.2#<emphasis role="bold"> rpm -Uvh jpackage-utils-1.7.5-1jpp.1.el5.centos.noarch.rpm</emphasis>
 
        </programlisting>
        <para> Next we will need to add the Java runtime library libgcj. The libgcj package includes
            the Java runtime library, which is needed to run Java programs compiled using the gcc
            Java compiler (gcj). </para>
        <programlisting>
            
-bash-3.2#<emphasis role="bold"> yum list | grep libgcj</emphasis>
libgcj.i3864.1.2-44.el5base     
libgcj.x86_64  4.1.2-44.el5base     
libgcj-devel.i386          4.1.2-44.el5base     
libgcj-devel.x86_64        4.1.2-44.el5base     
libgcj-src.x86_64          4.1.2-44.el5base     
-bash-3.2#<emphasis role="bold"> yum install libgcj.x86_64</emphasis>
-bash-3.2#<emphasis role="bold"> yum install rpm-build gcc-java jpackage-utils libXp</emphasis>
</programlisting>
        <para> Our next step is install Apache Tomcat on CentOS. A useful link that describes these
            setps is here: <link
                xlink:href="http://lejnieks.com/2008/11/installing-tomcat-on-centos"
                >http://lejnieks.com/2008/11/installing-tomcat-on-centos</link>. To see what Tomcat
            files are available to install, we can run yum through a grep command to filter out only
            the lines that have the word tomcat in them. </para>
        <programlisting> 
-bash-3.2#<emphasis role="bold"> yum list | grep tomcat</emphasis>
tomcat5.x86_64 5.5.23-0jpp.7.el5_2.1       base     
tomcat5-admin-webapps.x86_64   5.5.23-0jpp.7.el5_2.1       base     
tomcat5-common-lib.x86_64  5.5.23-0jpp.7.el5_2.1       base     
tomcat5-jasper.x86_64      5.5.23-0jpp.7.el5_2.1       base     
tomcat5-jasper-javadoc.x86_64  5.5.23-0jpp.7.el5_2.1       base     
tomcat5-jsp-2.0-api.x86_64 5.5.23-0jpp.7.el5_2.1       base     
tomcat5-jsp-2.0-api-javadoc.x86_64         5.5.23-0jpp.7.el5_2.1       base     
tomcat5-server-lib.x86_64  5.5.23-0jpp.7.el5_2.1       base     
tomcat5-servlet-2.4-api.x86_64 5.5.23-0jpp.7.el5_2.1       base     
tomcat5-servlet-2.4-api-javadoc.x86_64     5.5.23-0jpp.7.el5_2.1       base     
tomcat5-webapps.x86_64     5.5.23-0jpp.7.el5_2.1       base     
-bash-3.2#<emphasis role="bold"> yum install tomcat5.x86_64 tomcat5-webapps.x86_64 tomcat5-admin-webapps.x86_64</emphasis>
</programlisting>
        <para>We are now ready to use the "service" UNIX command to restart the Tomcat web
            server.</para>
        <programlisting>        
-bash-3.2#<emphasis role="bold"> service tomcat5 restart</emphasis>
-bash-3.2#<emphasis role="bold"> chkconfig tomcat5 on</emphasis>

        </programlisting>
    </sect1>
</article>
