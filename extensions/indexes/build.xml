<project basedir="." default="jar" name="indexes">
    
    <macrodef name="iterate">
        <attribute name="target"/>
        <sequential>
            <ant antfile="build.xml" dir="ngram" target="@{target}">
                <property name="module" value="ngram"/>
            </ant>
            <ant antfile="build.xml" dir="spatial" target="@{target}">
                <property name="module" value="spatial"/>
            </ant>            
        </sequential>
    </macrodef>

	<target name="compile">
		<echo message="---------------------------"/>
        <echo message="Compiling additional index modules"/>
        <echo message="---------------------------"/>
        <iterate target="compile"/>
	</target>

    <target name="compile-tests">
		<echo message="---------------------------"/>
        <echo message="Compiling additional index module tests"/>
        <echo message="---------------------------"/>
        <iterate target="compile-tests"/>
    </target>

    <target name="jar">
        <echo message="---------------------------"/>
        <echo message="Creating jars for additional index modules"/>
        <echo message="---------------------------"/>
        <iterate target="jar"/>
    </target>

	<target name="clean">
        <echo message="Cleaning additional index modules ..."/>
        <iterate target="clean"/>
    </target>

    <target name="test">
        <echo message="------------------------------------------"/>
        <echo message="Running tests on additional index modules"/>
        <echo message="------------------------------------------"/>
        <iterate target="test"/>
    </target>
    
</project>
