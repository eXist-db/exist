/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["betterform.ui.container.RepeatItem"]){dojo._hasResource["betterform.ui.container.RepeatItem"]=true;dojo.provide("betterform.ui.container.RepeatItem");dojo.require("betterform.ui.container.Container");dojo.require("dijit._Templated");dojo.require("dijit.Dialog");dojo.require("dojo.NodeList-fx");dojo.declare("betterform.ui.container.RepeatItem",[betterform.ui.container.Container,dijit._Templated],{repeatId:"",protoype:"",position:"",animIn:null,animOut:null,dialogId:null,appearance:"",buildRendering:function $DA1c_(){this.domNode=this.srcNodeRef;if(dojo.attr(this.srcNodeRef,"appearance")!=undefined){this.appearance=dojo.attr(this.srcNodeRef,"appearance");}},handleStateChanged:function $DA1h_(_1){this.inherited(arguments);},_onBlur:function $DA1i_(){this.inherited(arguments);},_onFocus:function $DA1j_(){if(dojo.hasClass(this.domNode,"xfRepeatIndexMouseOver")){dojo.removeClass(this.domNode,"xfRepeatIndexMouseOver");}this.forceIndex();this.inherited(arguments);},forceIndex:function $DA1k_(){if(dojo.hasClass(this.domNode,"xfRepeatIndex")){return;}var _2=this.domNode.parentNode.childNodes;dojo.forEach(_2,function(_3){if(dojo.hasClass(_3,"xfRepeatIndex")){dojo.removeClass(_3,"xfRepeatIndex");}if(dojo.hasClass(_3,"xfRepeatIndexPre")){dojo.removeClass(_3,"xfRepeatIndexPre");}});dojo.addClass(this.domNode,"xfRepeatIndexPre");var _4=this._getXFormsPosition();var _5=this._getRepeat();fluxProcessor.setRepeatIndex(dojo.attr(_5.domNode,"repeatId"),_4);},_getRepeat:function $DA1l_(){var _6=this.domNode.parentNode;while(dojo.attr(_6,"repeatId")==undefined&&_6!=undefined){_6=_6.parentNode;}return dijit.byId(dojo.attr(_6,"id"));},_getXFormsPosition:function $DA1m_(){dojo.attr(this.domNode,"selected","true");var _7=this._getRepeat()._getRepeatItems();var _8=0;dojo.forEach(_7,function(_9,_a){if(dojo.attr(_9,"selected")=="true"){_9.removeAttribute("selected");_8=_a+1;}});return _8;},nextItem:function $DA1n_(){var _b=this._getXFormsPosition()+1;var _c=this._getRepeat();if(_b>_c._getSize()){_b=_c._getSize();}fluxProcessor.setRepeatIndex(dojo.attr(_c.domNode,"repeatId"),_b);},previousItem:function $DA1o_(){var _d=this._getXFormsPosition()-1;var _e=this._getRepeat();if(_d<1){_d=1;}fluxProcessor.setRepeatIndex(dojo.attr(_e.domNode,"repeatId"),_d);},showRepeatItem:function $DA1p_(){dojo.style(this.domNode,"opacity","1");},hideRepeatItem:function $DA1q_(){dojo.style(this.domNode,"opacity","0");}});}