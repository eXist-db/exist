/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


if(!dojo._hasResource["betterform.FluxProcessor"]){dojo._hasResource["betterform.FluxProcessor"]=true;dojo.provide("betterform.FluxProcessor");dojo.require("betterform.XFormsProcessor");dojo.require("dojo.NodeList-fx");dojo.require("betterform.ui.UIElementFactory");dojo.require("dojox.layout.FloatingPane");dojo.require("dojox.widget.Toaster");dojo.require("betterform.ui.common.GlobalAlert");dojo.require("betterform.ui.common.BowlAlert");dojo.require("betterform.ui.common.InlineRoundBordersAlert");dojo.require("betterform.ui.common.InlineAlert");dojo.require("betterform.ui.common.ToolTipAlert");dojo.declare("betterform.FluxProcessor",betterform.XFormsProcessor,{sessionKey:"",skipshutdown:false,isDirty:false,factory:null,currentControlId:"",unloadMsg:"You are about to leave this XForms application",webtest:"@WEBTEST@",isReady:false,contextroot:"",defaultAlertHandler:null,subscribers:[],constructor:function $DAz4_(){this.factory=new betterform.ui.UIElementFactory();if(this.webtest!="true"){dojo.connect(window,"onbeforeunload",this,"handleUnload");dojo.connect(window,"onunload",this,"close");}this.skipshutdown=false;var _1=dojo.query(".GlobalAlert",dojo.doc)[0];if(_1!=undefined){dojo.require("betterform.ui.common.GlobalAlert");this.defaultAlertHandler=new betterform.ui.common.GlobalAlert({});console.warn("!! WARNING: GLOBAL ALERT HANDLER NOT IMPLEMENTED YET !!!");}var _2=dojo.query(".BowlAlert",dojo.doc)[0];if(_2!=undefined){dojo.require("betterform.ui.common.BowlAlert");this.defaultAlertHandler=new betterform.ui.common.BowlAlert({});console.warn("!! WARNING: BOWL ALERT HANDLER NOT IMPLEMENTED YET !!!");}var _3=dojo.query(".InlineRoundBordersAlert",dojo.doc)[0];if(_3!=undefined){dojo.require("betterform.ui.common.InlineRoundBordersAlert");this.defaultAlertHandler=new betterform.ui.common.InlineRoundBordersAlert({});}var _4=dojo.query(".InlineAlert",dojo.doc)[0];if(_4!=undefined){dojo.require("betterform.ui.common.InlineAlert");this.defaultAlertHandler=new betterform.ui.common.InlineAlert({});}var _5=dojo.query(".ToolTipAlert",dojo.doc)[0];if(_5!=undefined||(this.defaultAlertHandler==undefined)){dojo.require("betterform.ui.common.ToolTipAlert");this.defaultAlertHandler=new betterform.ui.common.ToolTipAlert({});}this.subscribers[0]=dojo.subscribe("/xf/valid",this.defaultAlertHandler,"handleValid");this.subscribers[1]=dojo.subscribe("/xf/invalid",this.defaultAlertHandler,"handleInvalid");},setInlineRoundBorderAlertHandler:function $DAz5_(){this.unsubscribeFromAlertHandler();dojo.require("betterform.ui.common.InlineRoundBordersAlert");this.defaultAlertHandler=new betterform.ui.common.InlineRoundBordersAlert({});this.subscribers[0]=dojo.subscribe("/xf/valid",this.defaultAlertHandler,"handleValid");this.subscribers[1]=dojo.subscribe("/xf/invalid",this.defaultAlertHandler,"handleInvalid");},setToolTipAlertHandler:function $DAz6_(){this.unsubscribeFromAlertHandler();this.defaultAlertHandler==undefined;dojo.require("betterform.ui.common.ToolTipAlert");this.defaultAlertHandler=new betterform.ui.common.ToolTipAlert({});this.subscribers[0]=dojo.subscribe("/xf/valid",this.defaultAlertHandler,"handleValid");this.subscribers[1]=dojo.subscribe("/xf/invalid",this.defaultAlertHandler,"handleInvalid");},unsubscribeFromAlertHandler:function $DAz7_(){for(var i=0;i<this.subscribers.length;i++){dojo.unsubscribe(this.subscribers[i]);}},handleUnload:function $DAz8_(_7){if(this.isDirty==true&&this.skipshutdown==false){dojo.stopEvent(_7);_7.returnValue=this.unloadMsg;return this.unloadMsg;}},close:function $DAz9_(){var _8=dojo.hitch(this,fluxProcessor.skipShutdown).skipshutdown;if(!_8){fluxProcessor.closeSession();}},closeSession:function $DA0A_(){try{dwr.engine.setErrorHandler(this._handleExceptions);dwr.engine.setOrdered(true);Flux.close(this.sessionKey);}catch(ex){fluxProcessor._handleExceptions("Failure executing Flux.closeSession ",ex);}},ignoreExceptions:function $DA0B_(_9){console.warn("FluxProcessor.ignoreExceptions():");},dispatchEvent:function $DA0C_(_a){this._useLoadingMessage();try{dwr.engine.setErrorHandler(this._handleExceptions);dwr.engine.setOrdered(true);Flux.dispatchEvent(_a,this.sessionKey,this.applyChanges);}catch(ex){fluxProcessor._handleExceptions("Failure executing Flux.dispatchEvent",ex);}return false;},dispatchEventType:function $DA0D_(_b,_c,_d){try{dwr.engine.setErrorHandler(this._handleExceptions);dwr.engine.setOrdered(true);if(_d==undefined){Flux.dispatchEventType(_b,_c,this.sessionKey,dojo.hitch(this,this.applyChanges));}else{Flux.dispatchEventTypeWithContext(_b,_c,this.sessionKey,_d,dojo.hitch(this,this.applyChanges));}}catch(ex){fluxProcessor._handleExceptions("Failure executing Flux.dispatchEventType",ex);}},setControlValue:function $DA0E_(id,_f){this.isDirty=true;try{dwr.engine.setErrorHandler(this._handleExceptions);this._useLoadingMessage();dwr.engine.setOrdered(true);dwr.engine.setErrorHandler(this._handleExceptions);Flux.setUIControlValue(id,_f,this.sessionKey,this.applyChanges);}catch(ex){fluxProcessor._handleExceptions("Failure executing Flux.setControlValue",ex);}},setRepeatIndex:function $DA0G_(_10,_11){this._useLoadingMessage();try{dwr.engine.setErrorHandler(this._handleExceptions);dwr.engine.setOrdered(true);Flux.setRepeatIndex(_10,_11,this.sessionKey,this.applyChanges);}catch(ex){fluxProcessor._handleExceptions("Failure executing Flux.setRepeatIndex",ex);}},_useLoadingMessage:function $DA0H_(){try{dwr.engine.setPreHook(function(){document.getElementById("indicator").className="xfEnabled";});dwr.engine.setPostHook(function(){document.getElementById("indicator").className="xfDisabled";});}catch(ex){fluxProcessor._handleExceptions("Failure executing Flux._useLoadingMessage",ex);}},_handleExceptions:function $DA0I_(msg,_13){if(msg!=undefined&&_13!=undefined){console.error(msg," - Exception: ",_13);}else{if(msg!=undefined){console.error(msg);if(this.webtest!="true"){alert(msg);}else{this.logTestMessage(xmlEvent.contextInfo.errorinformation);}}else{console.error("Unknown exception occured! arguments: ",arguments);}}},applyChanges:function $DA0J_(_14){var _15=new Array();var _16=0;dojo.forEach(_14,function(_17){switch(_17.type){case "betterform-index-changed":fluxProcessor._handleBetterFormIndexChanged(_17);break;case "betterform-insert-itemset":fluxProcessor._handleBetterFormInsertItemset(_17);break;case "betterform-insert-repeatitem":fluxProcessor._handleBetterFormInsertRepeatItem(_17);break;case "betterform-item-deleted":fluxProcessor._handleBetterFormItemDeleted(_17);break;case "betterform-load-uri":fluxProcessor._handleBetterFormLoadURI(_17);break;case "betterform-render-message":fluxProcessor._handleBetterFormRenderMessage(_17);break;case "betterform-replace-all":fluxProcessor._handleBetterFormReplaceAll();break;case "betterform-state-changed":fluxProcessor._handleBetterFormStateChanged(_17);break;case "upload-progress-event":fluxProcessor._handleUploadProgressEvent(_17);break;case "xforms-focus":fluxProcessor._handleXFormsFocus(_17);break;case "xforms-help":fluxProcessor._handleShowHelp(_17);break;case "xforms-hint":fluxProcessor._handleXFormsHint(_17);break;case "xforms-link-exception":fluxProcessor._handleLinkException(_17);break;case "betterform-switch-toggled":fluxProcessor._handleSwitchToggled(_17);break;case "betterform-script-action":eval(_17.contextInfo["script"]);break;case "xforms-value-changed":break;case "xforms-version-exception":fluxProcessor._handleVersionException(_17);break;case "xforms-binding-exception":fluxProcessor._handleBindingException(_17);break;case "xforms-submit-error":fluxProcessor._handleSubmitError(_17);break;case "DOMFocusIn":fluxProcessor._handleDOMFocusIn(_17);break;case "xforms-out-of-range":fluxProcessor._handleOutOfRange(_17);break;case "xforms-in-range":fluxProcessor._handleInRange(_17);break;case "xforms-invalid":case "xforms-valid":_15[_16]=_17;_16++;break;case "betterform-id-generated":case "DOMActivate":case "xforms-select":case "xforms-deselect":case "DOMFocusOut":case "xforms-model-construct":case "xforms-model-construct-done":break;case "xforms-ready":this.isReady=true;dojo.publish("/xf/ready",[]);break;case "xforms-submit":break;case "xforms-submit-done":fluxProcessor._handleSubmitDone(_17);break;default:console.error("Event "+_17.type+" unknown [Event:",_17,"]");break;}});if(_15.length>0){fluxProcessor._handleValidity(_15);}},_handleValidity:function $DA0K_(_18){dojo.forEach(_18,function(_19){var _1a=dijit.byId(_19.contextInfo.targetId);if(_1a!=undefined){if(_19.type=="xforms-valid"){_1a._handleSetValidProperty(true);}else{_1a._handleSetValidProperty(false);}}});},_handleBindingException:function $DA0L_(_1b){if(this.webtest!="true"){console.warn("xforms-binding-exception at "+_1b.contextInfo.targetId+" - "+_1b.contextInfo.defaultinfo);}else{this.logTestMessage("xforms-binding-exception");}},_handleVersionException:function $DA0M_(_1c){if(this.webtest!="true"){console.error(_1c.contextInfo.errorinformation);}else{this.logTestMessage(_1c.contextInfo.errorinformation);}},_handleSubmitError:function $DA0N_(_1d){console.warn("xforms-submit-error at ",_1d.contextInfo);dojo.query(".xfInvalid",dojo.doc).forEach(function(_1e){dojo.publish("/xf/invalid",[dojo.attr(_1e,"id"),"submitError"]);});},_handleBetterFormLoadURI:function $DA0O_(_1f){if(_1f.contextInfo.show=="replace"){fluxProcessor.skipshutdown=true;window.location.href=_1f.contextInfo.uri;}else{if(_1f.contextInfo.show=="new"){window.open(_1f.contextInfo.uri,"_betterform","menubar=yes,toolbar=yes,location=yes,directories=yes,fullscreen=no,titlebar=yes,hotkeys=yes,status=yes,scrollbars=yes,resizable=yes");}else{if(_1f.contextInfo.show=="embed"){var _20=_1f.contextInfo.xlinkTarget;var _21;if(dojo.byId(_20)!=undefined){_21=_20;}else{var tmp=dojo.query("*[name='"+_20+"']")[0];_21=tmp.id;}this._unloadDOM(_21);var _23=dojo.byId(_21);_23.innerHTML=_1f.contextInfo.targetElement;dojo.attr(_23,"id",_20+"Old");var _24=dojo.byId(_21);dojo.require("dojo.parser");dojo.parser.parse(_23);dojo.place(_24,_23,"before");dojo.fx.wipeIn({node:_24,duration:500}).play();var _25=dojo.attr(_23,"class");dojo.attr(_24,"class",_25);_23.parentNode.removeChild(_23);}else{if(_1f.contextInfo.show=="none"){this._unloadDOM(_1f.contextInfo.xlinkTarget);}else{console.error("betterform-load-uri show='"+_1f.contextInfo.show+"' unknown!");}}}}},_handleSubmitDone:function $DA0P_(_26){if(_26.contextInfo.document!=null){var doc=_26.contextInfo.document;var _28=window.open();_28.document.write(doc);_28.document.close();}else{if(_26.contextInfo.embedElement!=null){if(_26.contextInfo.embedTarget==undefined){return;}var _29=_26.contextInfo.embedTarget;var _2a=_26.contextInfo.embedElement;var _2b;if(dojo.byId(_29)!=undefined){_2b=_29;}else{var tmp=dojo.query("*[name='"+_29+"']")[0];_2b=tmp.id;}this._unloadDOM(_2b);var _2d=dojo.byId(_2b);_2d.innerHTML=_2a;dojo.require("dojo.parser");dojo.parser.parse(_2d);}}},_unloadDOM:function $DA0Q_(_2e){var _2f=dojo.byId(_2e);if(_2f==undefined){return;}var _30="widgetid";if(dojo.isIE){_30="widgetId";}var _31=dojo.query("*["+_30+"]",_2f);dojo.forEach(_31,function(_32){if(_32!=undefined){var _33=dijit.byId(dojo.attr(_32,"id"));if(_33!=undefined){_33.destroy();}else{_33=dijit.byId(dojo.attr(_32,_30));if(_33!=undefined){_33.destroy();}}}});while(_2f.hasChildNodes()){_2f.removeChild(_2f.firstChild);}},_handleBetterFormRenderMessage:function $DA0R_(_34){var _35=_34.contextInfo.message;var _36=_34.contextInfo.level;if(this.webtest!="true"){if(_36=="ephemeral"){dijit.byId("betterformMessageToaster").setContent(_35,"message");dijit.byId("betterformMessageToaster").show();}else{window.alert(_35);}}else{this.logTestMessage(_35);}},_handleOutOfRange:function $DA0S_(_37){var _38=dojo.byId(_37.contextInfo.targetId+"-value");if(_38!=undefined){if(dojo.hasClass(_38,"xfInRange")){dojo.removeClass(_38,"xfInRange");}dojo.addClass(_38,"xfOutOfRange");}},_handleInRange:function $DA0T_(_39){var _3a=dojo.byId(_39.contextInfo.targetId+"-value");if(_3a!=undefined){if(dojo.hasClass(_3a,"xfOutOfRange")){dojo.removeClass(_3a,"xfOutOfRange");}dojo.addClass(_3a,"xfInRange");}},logTestMessage:function $DA0U_(_3b){var log=dojo.byId("messageLog");if(!log){log=document.createElement("div");log.id="messageLog";document.body.appendChild(log);}var _3d=document.createElement("message");_3d.id="message"+(this._countMessages(log)+1);var _3e=document.createTextNode(_3b);_3d.appendChild(_3e);log.appendChild(_3d);},_countMessages:function $DA0V_(log){var _40=log.getElementsByTagName("message").length;return _40;},_handleBetterFormReplaceAll:function $DA0W_(){fluxProcessor.skipshutdown=true;var _41=window.location.href.lastIndexOf("#");var _42=window.location.href.lastIndexOf("?");var _43=window.location.href;if(_41!=-1){_43=window.location.href.substring(0,_41);}if(_42==-1){_43+="?";}_43+="&submissionResponse=true&sessionKey="+fluxProcessor.sessionKey;if(_41!=-1){_43+=window.location.href.substring(_41);}window.open(_43,"_self");},_handleBetterFormStateChanged:function $DA0X_(_44){var _45=_44.contextInfo.targetId;if(_44.contextInfo.targetName!=undefined&&_44.contextInfo.targetName=="repeat"){var _46=dojo.query("*[repeatId='"+_45+"']")[0];if(_46==undefined){console.error("(FluxProcessor._handleBetterFormStateChanged xf:repeat: ",_45," does not exist");return;}var _47=dijit.byId(dojo.attr(_46,"id"));if(_47!=undefined){_47.handleStateChanged(_44.contextInfo);}else{if(_47==undefined&&_46!=undefined){_47=new betterform.ui.container.Repeat({},_46);_47.handleStateChanged(_44.contextInfo);}}}else{if(_44.contextInfo.targetName!=undefined&&_44.contextInfo.targetName=="group"){var _48=dijit.byId(_44.contextInfo.targetId);if(_48==undefined&&dojo.byId(_44.contextInfo.targetId)!=undefined){dojo.require("betterform.ui.container.Group");_48=new betterform.ui.container.Group({},dojo.byId(_44.contextInfo.targetId));}else{if(_44.contextInfo.targetId!=undefined){var _49=dojo.query("*[repeatItemId='"+_44.contextInfo.targetId+"']")[0];if(_49!=undefined&&dojo.hasClass(_49,"xfRepeatItem")){_48=dijit.byId(dojo.attr(_49,"id"));}}}if(_48!=undefined){_48.handleStateChanged(_44.contextInfo);}else{console.warn("FluxProcessor._handleBetterFormStateChanged: don't know how to handle xmlEvent: ",_44," for target: "+_44.contextInfo.targetId+" [",_44.contextInfo.targetName,"]");}}else{if(_44.contextInfo.targetName!=undefined&&_44.contextInfo.targetName=="select1"&&_44.contextInfo.copyItem!=undefined){var _4a="FluxProcessor._handleBetterFormStateChanged: Select1 ControlValue "+_44.contextInfo.targetId+"-value: No item selected";var _4b=dojo.byId(_44.contextInfo.targetId+"-value");if(_4b!=undefined){var _4c=_44.contextInfo.selectedItem;if(_4c!=undefined&&_4c!=""){var _4d=dojo.query(".xfSelectorItem",_4b);var _4e=false;for(var i=0;i<_4d.length;i++){if(dojo.attr(_4d[i],"id")==_4c){_4b.selectedIndex=(i);_4e=true;}}if(!_4e){console.warn(_4a);}}else{console.warn(_4a);}}else{console.warn(_4a);}}else{if(dijit.byId(_45)!=undefined){dijit.byId(_45).handleStateChanged(_44.contextInfo);}else{if(dojo.byId(_45)!=undefined){var _50=new betterform.ui.Control({contextInfo:_44.contextInfo},dojo.byId(_45));_50.handleStateChanged(_44.contextInfo);}else{if(_44.contextInfo.parentId!=undefined&&_44.contextInfo.parentId!=""){var _51=dijit.byId(_44.contextInfo.parentId);if(_51!=undefined){_51.handleStateChanged(_44.contextInfo);}else{var _52=dojo.byId(_44.contextInfo.parentId);if(_52==undefined){console.error("FluxProcessor betterform-state-changed  Warning: Neither Target nor its Parent does exist [xmlEvent",_44,"]");}else{if(dojo.hasClass(_52,"xfSelectorItem")){dijit.byId(dojo.attr(_52.parentNode,"id")).handleStateChanged(_44.contextInfo);}else{console.warn("FluxProcessor betterform-state-changed: No handleStateChanged implementation availabled for contextinfo: ",_44.contextInfo);}}}}else{console.error("FluxProcessor betterform-state-changed Error: Processor does not know how to handle betterform-state-changed based on xmlEvent ",_44.contextInfo.targetId);}}}}}}},_handleBetterFormInsertRepeatItem:function $DA0Y_(_53){var _54=dojo.query("*[repeatId='"+_53.contextInfo.targetId+"']");var _55=dijit.byId(dojo.attr(_54[0],"id"));if(_55==undefined){dojo.require("betterform.ui.container.Repeat");_55=new betterform.ui.container.Repeat({},_54[0]);}_55.handleInsert(_53.contextInfo);},_handleBetterFormInsertItemset:function $DA0Z_(_56){if(dijit.byId(_56.contextInfo.targetId)!=undefined){dijit.byId(_56.contextInfo.targetId).handleInsert(_56.contextInfo);}else{var _57=dojo.byId(_56.contextInfo.targetId);var _58;var _59=dojo.attr(_57,"dojoType");if(_59!=undefined&&_59=="betterform.ui.select.OptGroup"){dojo.require("betterform.ui.select.OptGroup");_58=new betterform.ui.select.OptGroup({contextInfo:_56.contextInfo},_57);}else{if(_59!=undefined&&_59=="betterform.ui.select1.RadioItemset"){dojo.require("betterform.ui.select1.RadioItemset");_58=new betterform.ui.select1.RadioItemset({contextInfo:_56.contextInfo},_57);}else{if(_59!=undefined&&_59=="betterform.ui.select.CheckBoxItemset"){dojo.require("betterform.ui.select1.RadioItemset");_58=new betterform.ui.select.CheckBoxItemset({contextInfo:_56.contextInfo},_57);}else{console.warn("FluxProcessor apply betterform-insert-itemset: Itemset Type "+_59+" not supported yet");}}}if(_58!=undefined){_58.handleInsert(_56.contextInfo);}else{console.warn("FluxProcessor apply betterform-insert-itemset: Error during itemset creation: ItemsetId"+_56.contextInfo.targetId+" itemsetType: "+_59+" not supported yet");}}},_handleBetterFormItemDeleted:function $DA0a_(_5a){if(_5a.contextInfo.targetName=="itemset"){dijit.byId(_5a.contextInfo.targetId).handleDelete(_5a.contextInfo);}else{if(_5a.contextInfo.targetName=="repeat"){var _5b=dojo.query("*[repeatId='"+_5a.contextInfo.targetId+"']");dijit.byId(dojo.attr(_5b[0],"id")).handleDelete(_5a.contextInfo);}}},_handleBetterFormIndexChanged:function $DA0b_(_5c){var _5d=dojo.query("*[repeatId='"+_5c.contextInfo.targetId+"']");var _5e=dijit.byId(dojo.attr(_5d[0],"id"));_5e.handleSetRepeatIndex(_5c.contextInfo);},_handleUploadProgressEvent:function $DA0c_(_5f){var _60=_5f.contextInfo.targetid;if(dijit.byId(_60)!=undefined){dijit.byId(_60).updateProgress(_5f.contextInfo.progress);}else{console.error("error during upload-progress-event: targetId "+_5f.contextInfo.targetId+" does not exist");}},_handleXFormsFocus:function $DA0d_(_61){try{var _62=_61.contextInfo.targetName;if(_62!="group"&&_62!="repeat"&&_62!="switch"&&_62!="case"){xfControlId=_61.contextInfo.targetId+"-value";dijit.byId(xfControlId).handleOnFocus();}}catch(ex){fluxProcessor._handleExceptions("error during xforms-focus: targetId "+_61.contextInfo.targetId+" does not exist - Exception:",ex);}},_handleDOMFocusIn:function $DA0e_(_63){xfControlId=_63.contextInfo.targetId+"-value";if(dijit.byId(xfControlId)!=undefined){dijit.byId(xfControlId)._handleDOMFocusIn();}else{if(dojo.byId(xfControlId)!=undefined){var _64=dojo.byId(xfControlId);_64.focus();}else{console.warn("FluxProcessor._handleDOMFocusIn no Element found for id:",xfControlId);}}},_handleXFormsHint:function $DA0f_(_65){var _66=_65.contextInfo.targetId;var _67=dojo.attr(dojo.byId(_66+"-value"),"title");dijit.byId("betterformMessageToaster").setContent(_67,"message");dijit.byId("betterformMessageToaster").show();if(this.webtest=="true"){this.logTestMessage(_67);}},_handleShowHelp:function $DA0g_(_68){fluxProcessor.currentControlId=_68.contextInfo.targetId;fluxProcessor.showHelp();},_handleLinkException:function $DA0h_(_69){if(this.webtest!="true"){console.error("Fatal error - "+_69.type+": Failed to load resource: "+_69.contextInfo.resourceUri);}else{fluxProcessor.logTestMessage("Fatal error - "+_69.type+": Failed to load resource: "+_69.contextInfo.resourceUri);}},_handleSwitchToggled:function $DA0i_(_6a){var _6b=dijit.byId(_6a.contextInfo.targetId);if(_6b==undefined&&dojo.byId(_6a.contextInfo.targetId)!=undefined){dojo.require("betterform.ui.container.Switch");_6b=new betterform.ui.container.Switch({},dojo.byId(_6a.contextInfo.targetId));}_6b.toggleCase(_6a.contextInfo);},fetchProgress:function $DA0j_(id,_6d){try{Flux.fetchProgress(id,_6d,this.sessionKey,this.applyChanges);}catch(ex){fluxProcessor._handleExceptions("Failure executing Flux.fetchProgress",ex);}},setLocale:function $DA0k_(_6e){try{Flux.setLocale(_6e,this.sessionKey,this.applyChanges);}catch(ex){fluxProcessor._handleExceptions("Failure executing Flux.setLocale",ex);}},showHelp:function $DA0l_(){if(this.currentControlId==undefined||this.currentControlId==""||this.currentControlId==""){console.warn("No Control selected to show help for");return;}var _6f=dojo.byId(this.currentControlId+"-help");if(_6f==undefined){console.warn("No help available for Control Id: '"+this.currentControlId+"'");return;}var _70=dojo.byId("helpTrigger");var _71=document.createElement("div");dojo.style(_71,{"display":"none"});_70.appendChild(_71);_71.innerHTML=_6f.innerHTML;var _72=new dojox.layout.FloatingPane({title:"Help",closeable:true,resizable:true,dockable:false},_71);dojo.addClass(_72.domNode,"xfHelpPane");_72.startup();}});}