<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="jar" name="metadata-interface">
    
    <import file="../common.xml"/>
    
	<target name="jar" depends="compile" if="include.feature.metadata.config">
        <jar destfile="${top.dir}/${lib.extensions}/exist-metadata.jar" basedir="${module.classes}">
	        <manifest>
                <attribute name="Project-Name" value="${project.name}"/>
                <attribute name="Project-Version" value="${project.version}"/>
                <attribute name="Project-Build" value="${DSTAMP}"/>
                <attribute name="SVN-Revision" value="${svn.revision}"/>
            </manifest>
		</jar>
    </target>

    <target name="clean" if="include.feature.metadata.config">
        <delete file="${top.dir}/${lib.extensions}/exist-metadata.jar" failonerror="false"/>
        <delete dir="${module.classes}" failonerror="false"/>
        <delete dir="${test.classes}" failonerror="false"/>
    </target>

    <target name="download" if="include.feature.metadata.config">
        <mkdir dir="${classes}"/>

        <echo message="--------------------------------------------------"/>
        <echo message="Downloading libraries required by the Metadata Storage "/>
        <echo message="--------------------------------------------------"/>

        <fetch classpathref="classpath.core" dest="${top.dir}/${lib.user}" 
                             url="http://eaio.com/maven2/com/eaio/uuid/uuid/3.3/uuid-3.3.jar" 
                             classname="com.eaio.uuid.UUID">
            <patternset>
                <include name="**/uuid-3.3.jar"/>
            </patternset>
        </fetch>
	</target>
    
    <!-- 
    <target name="test" depends="compile-tests">
        <junit fork="yes" haltonfailure="false" printsummary="yes" showoutput="${junit.output}" maxmemory="${junit.forked.VM.maxmemory}">

            <classpath refid="classpath.core"/>
            <classpath refid="classpath.junit"/>
            <classpath refid="classpath.aspectj"/>
    
            <formatter type="plain"/>
            <formatter type="xml"/>

            <test name="org.exist.storage.md.SimpleMDTest" todir="${junit.index.reports}"/>
        </junit>
    </target>
    -->

</project>