<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="jar" name="metadata-sleepycat">
    
    <import file="../common.xml"/>
    
	<target name="jar" depends="compile">
        <jar destfile="${top.dir}/${lib.extensions}/exist-metadata-sleepycat.jar" basedir="${module.classes}">
	        <manifest>
                <attribute name="Project-Name" value="${project.name}"/>
                <attribute name="Project-Version" value="${project.version}"/>
                <attribute name="Project-Build" value="${DSTAMP}"/>
                <attribute name="SVN-Revision" value="${svn.revision}"/>
            </manifest>
		</jar>
    </target>

    <target name="clean">
        <delete file="${top.dir}/${lib.extensions}/exist-metadata-sleepycat.jar" failonerror="false"/>
        <delete dir="${module.classes}" failonerror="false"/>
        <delete dir="${test.classes}" failonerror="false"/>
    </target>
    
    <target name="download" if="include.feature.metadata.sleepycat.config">
        <mkdir dir="${classes}"/>

        <echo message="--------------------------------------------------"/>
        <echo message="Downloading libraries required by the Sleepycat backend for Metadata Storage "/>
        <echo message="--------------------------------------------------"/>

        <fetch classpathref="classpath.core" dest="${top.dir}/${lib.user}" 
                             url="http://download.oracle.com/maven/com/sleepycat/je/5.0.55/je-5.0.55.jar" 
                             classname="com.sleepycat.je.Database">
            <patternset>
                <include name="**/je-5.0.55.jar"/>
            </patternset>
        </fetch>
	</target>
</project>